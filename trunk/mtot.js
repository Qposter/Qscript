$(document).ready(function(){$("#title, #desc").keyup(function(){var elm_id=$(this).attr("id");var preview_elm = $("#" + elm_id + "_preview");var max_count = (elm_id == "title") ? title_max : desc_max;var char_count = $.trim($(this).val()).length;var counter = $("#" + elm_id + "_count");var count = max_count - char_count;counter.html(count);if(count < 0) counter.css({'color':'red'});else counter.css({'color':'green'});if($.trim($(this).val()) != "") {if(char_count <= max_count) preview_elm.html($(this).val());else preview_elm.html($(this).val().substr(0, max_count) + ' ...');} else {if(elm_id == "title") preview_elm.html(title_default);else preview_elm.html(desc_default);}});$("#url").keyup(function() {if($.trim($(this).val()) != "") $("#" + $(this).attr("id") + "_preview").html($(this).val().replace('http://','')+'/');else $("#" + $(this).attr("id") + "_preview").html(url_default);});$("#title, #desc, #url").trigger("keyup");$("#title, #desc, #url").bind('blur focus', function() { $("#title, #desc, #url").trigger("keyup"); });$(".r").live('click', function() { $(this).fadeOut(900, function() { $(this).remove(); }); });$("#reset").click(function() { setTimeout(function() { $("#title, #desc, #url").trigger("keyup") }, 500); });$("#add").click(function() {if($.trim($("#title").val()) != "" && $.trim($("#desc").val()) != "" && $.trim($("#url").val()) != "") {$('<div class="s r"><h3>' + $("#title").val() + '</h3><a href="javascript://">' + $("#url").val() + '</a><p>' + $("#desc").val() + '</p></div>').insertAfter("#s");}return false;});}); 